const g=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}};g();const m="0.1.0-alpha.5",u="javascript";function s(o,t){const e=document.createElement(o);return t!==void 0&&e.classList.add(t),e}const r={root:{"background-color":"#1e1e1e",overflow:"hidden"},body:{width:"100%",height:"100%",display:"flex","flex-direction":"column"},toolbar:{"flex-grow":"1","padding-left":"1em","padding-right":"1em","padding-top":"0.5em","padding-bottom":"1em",display:"flex","flex-direction":"row",gap:"0.5em"},language:{"font-weight":"bold",color:"#4e6c8b","flex-grow":"1","text-align":"right"},editor:{width:"100%",height:"100%"}};class _{constructor(t,e,n){this._ui={},this._factory=t,this._options=n,this._onLoadCallback=n.onLoad,this._onUnloadCallback=n.onUnload,y(e)&&(this._ui.element=e,this._options={...n},this._attach())}_attach(){if(this._ui.element!==void 0){{const t=s("div","moroboxai-editor");Object.assign(t.style,r.root),this._options.width!==void 0&&(t.style.width=this._options.width),this._options.height!==void 0&&(t.style.height=this._options.height),this._ui.base=t,this._ui.element.appendChild(t)}{const t=s("div","moroboxai-body");Object.assign(t.style,r.body),this._ui.base.appendChild(t);{const e=s("div","moroboxai-toolbar");Object.assign(e.style,r.toolbar),this._ui.toolbar=e,t.appendChild(e)}{const e=s("div");Object.assign(e.style,r.editor),this._ui.wrapper=e,t.appendChild(e)}}{const t=s("input");t.type="button",t.value="Load",t.onclick=()=>this._notifyLoad(),this._ui.loadButton=t,this._ui.toolbar.appendChild(t)}{const t=s("input");t.type="button",t.value="Unload",t.onclick=()=>this._notifyUnload(),this._ui.unloadButton=t,this._ui.toolbar.appendChild(t)}{const t=s("span","moroboxai-language");Object.assign(t.style,r.language),t.textContent="Javascript",this._ui.toolbar.appendChild(t)}this._ui.editor=this._factory({element:this._ui.wrapper,language:this._options.language||u}),this._ui.editor.value=this._options.value||"",this.url=this._options.url}}_notifyLoad(){this._onLoadCallback&&this._onLoadCallback("javascript",this.value)}_notifyUnload(){this._onUnloadCallback&&this._onUnloadCallback()}get language(){return this._ui.editor!==void 0?this._ui.editor.language:u}set language(t){this._ui.editor!==void 0&&(this._ui.editor.language=t)}get url(){return this._options.url}set url(t){this._options.url=t,this._options.url!==void 0&&fetch(this._options.url).then(e=>e.text()).then(e=>this.value=e)}get value(){return this._ui.editor!==void 0?this._ui.editor.value:""}set value(t){this._ui.editor!==void 0&&(this._ui.editor.value=t)}onLoad(t){this._onLoadCallback=t}onUnload(t){this._onUnloadCallback=t}remove(){this._ui.editor!==void 0&&(this._ui.editor.remove(),this._ui.editor=void 0),this._ui.base!==void 0&&(this._ui.base.remove(),this._ui.base=void 0)}}function v(){return{language:u}}function b(o){return o!==void 0&&!p(o)&&!("className"in o)}function y(o){return"dataset"in o}function p(o){return"length"in o}function c(o,t,e){return new _(o,t,e)}function x(o,t,e){let n,i=v();return b(t)?e=t:n=t,e!==void 0&&(i={...i,...e}),n==null&&(i.element!==void 0?n=i.element:n=document.getElementsByClassName("moroboxai-editor")),p(n)?Array.prototype.map.call(n,a=>c(o,a,i)):c(o,n,i)}document.getElementById("moroboxai-editor-sdk-version").innerText=m;class C{constructor(t){this.language=t.language,this.element=t.element,this.textArea=document.createElement("textarea"),this.element.appendChild(this.textArea)}get value(){return this.textArea.textContent}set value(t){this.textArea.textContent=t}remove(){this.textArea.remove()}}let l=null;const h=document.getElementById("attach");function f(){l===null?(l=x(o=>new C(o),document.getElementById("editor"),{url:"https://raw.githubusercontent.com/moroboxai/moroboxai-games/master/piximoroxel8ai-sample/sample/agent.js",width:"35em",height:"30em",onLoad:(o,t)=>console.log("load",o,t),onUnload:()=>console.log("unload")}),h.textContent="Detach Editor"):(l.remove(),l=null,h.textContent="Attach Editor")}h.onclick=()=>f();f();
